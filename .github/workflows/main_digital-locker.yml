# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Build and deploy Node.js app to Azure Web App - digital-locker

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      
      - name: SemVer Autotag
        # You may pin to the exact commit or the version.
        # uses: DanySK/semver-autotag-action@d4a94ce589f9fbfd9ea13d7290826ff40bb18f41
        uses: DanySK/semver-autotag-action@0.1.0

      - name: Docker Setup Buildx
        # You may pin to the exact commit or the version.
        # uses: docker/setup-buildx-action@94ab11c41e45d028884a99163086648e898eed25
        uses: docker/setup-buildx-action@v1.6.0

      - name: Build and push Docker images
        # You may pin to the exact commit or the version.
        # uses: docker/build-push-action@7f9d37fa544684fb73bfe4835ed7214c255ce02b
        uses: docker/build-push-action@v2.9.0
